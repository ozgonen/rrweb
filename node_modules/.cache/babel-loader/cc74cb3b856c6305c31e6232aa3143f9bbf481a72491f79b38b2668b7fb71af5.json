{"ast":null,"code":"import { strFromU8, unzlibSync, strToU8 } from './../../../../ext/fflate/esm/browser.js';\nimport { MARK } from './base.js';\nconst unpack = raw => {\n  if (typeof raw !== 'string') {\n    return raw;\n  }\n  try {\n    const e = JSON.parse(raw);\n    if (e.timestamp) {\n      return e;\n    }\n  } catch (error) {}\n  try {\n    const e = JSON.parse(strFromU8(unzlibSync(strToU8(raw, true))));\n    if (e.v === MARK) {\n      return e;\n    }\n    throw new Error(`These events were packed with packer ${e.v} which is incompatible with current packer ${MARK}.`);\n  } catch (error) {\n    console.error(error);\n    throw new Error('Unknown data format.');\n  }\n};\nexport { unpack };","map":{"version":3,"names":["strFromU8","unzlibSync","strToU8","MARK","unpack","raw","e","JSON","parse","timestamp","error","v","Error","console"],"sources":["/Users/ogonen/rrweb/node_modules/rrweb/es/rrweb/packages/rrweb/src/packer/unpack.js"],"sourcesContent":["import { strFromU8, unzlibSync, strToU8 } from './../../../../ext/fflate/esm/browser.js';\nimport { MARK } from './base.js';\n\nconst unpack = (raw) => {\r\n    if (typeof raw !== 'string') {\r\n        return raw;\r\n    }\r\n    try {\r\n        const e = JSON.parse(raw);\r\n        if (e.timestamp) {\r\n            return e;\r\n        }\r\n    }\r\n    catch (error) {\r\n    }\r\n    try {\r\n        const e = JSON.parse(strFromU8(unzlibSync(strToU8(raw, true))));\r\n        if (e.v === MARK) {\r\n            return e;\r\n        }\r\n        throw new Error(`These events were packed with packer ${e.v} which is incompatible with current packer ${MARK}.`);\r\n    }\r\n    catch (error) {\r\n        console.error(error);\r\n        throw new Error('Unknown data format.');\r\n    }\r\n};\n\nexport { unpack };\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,UAAU,EAAEC,OAAO,QAAQ,yCAAyC;AACxF,SAASC,IAAI,QAAQ,WAAW;AAEhC,MAAMC,MAAM,GAAIC,GAAG,IAAK;EACpB,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;IACzB,OAAOA,GAAG;EACd;EACA,IAAI;IACA,MAAMC,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACH,GAAG,CAAC;IACzB,IAAIC,CAAC,CAACG,SAAS,EAAE;MACb,OAAOH,CAAC;IACZ;EACJ,CAAC,CACD,OAAOI,KAAK,EAAE,CACd;EACA,IAAI;IACA,MAAMJ,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACR,SAAS,CAACC,UAAU,CAACC,OAAO,CAACG,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;IAC/D,IAAIC,CAAC,CAACK,CAAC,KAAKR,IAAI,EAAE;MACd,OAAOG,CAAC;IACZ;IACA,MAAM,IAAIM,KAAK,CAAC,wCAAwCN,CAAC,CAACK,CAAC,8CAA8CR,IAAI,GAAG,CAAC;EACrH,CAAC,CACD,OAAOO,KAAK,EAAE;IACVG,OAAO,CAACH,KAAK,CAACA,KAAK,CAAC;IACpB,MAAM,IAAIE,KAAK,CAAC,sBAAsB,CAAC;EAC3C;AACJ,CAAC;AAED,SAASR,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}