{"ast":null,"code":"import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { CanvasContext } from '../../../../types/dist/types.js';\nimport webglMutation from './webgl.js';\nimport canvasMutation$1 from './2d.js';\nfunction canvasMutation({\n  event,\n  mutation,\n  target,\n  imageMap,\n  canvasEventMap,\n  errorHandler\n}) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const precomputedMutation = canvasEventMap.get(event) || mutation;\n      const commands = 'commands' in precomputedMutation ? precomputedMutation.commands : [precomputedMutation];\n      if ([CanvasContext.WebGL, CanvasContext.WebGL2].includes(mutation.type)) {\n        for (let i = 0; i < commands.length; i++) {\n          const command = commands[i];\n          yield webglMutation({\n            mutation: command,\n            type: mutation.type,\n            target,\n            imageMap,\n            errorHandler\n          });\n        }\n        return;\n      }\n      for (let i = 0; i < commands.length; i++) {\n        const command = commands[i];\n        yield canvasMutation$1({\n          event,\n          mutation: command,\n          target,\n          imageMap,\n          errorHandler\n        });\n      }\n    } catch (error) {\n      errorHandler(mutation, error);\n    }\n  });\n}\nexport { canvasMutation as default };","map":{"version":3,"names":["__awaiter","CanvasContext","webglMutation","canvasMutation$1","canvasMutation","event","mutation","target","imageMap","canvasEventMap","errorHandler","precomputedMutation","get","commands","WebGL","WebGL2","includes","type","i","length","command","error","default"],"sources":["/Users/ogonen/rrweb/node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/canvas/index.js"],"sourcesContent":["import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { CanvasContext } from '../../../../types/dist/types.js';\nimport webglMutation from './webgl.js';\nimport canvasMutation$1 from './2d.js';\n\nfunction canvasMutation({ event, mutation, target, imageMap, canvasEventMap, errorHandler, }) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            const precomputedMutation = canvasEventMap.get(event) || mutation;\r\n            const commands = 'commands' in precomputedMutation\r\n                ? precomputedMutation.commands\r\n                : [precomputedMutation];\r\n            if ([CanvasContext.WebGL, CanvasContext.WebGL2].includes(mutation.type)) {\r\n                for (let i = 0; i < commands.length; i++) {\r\n                    const command = commands[i];\r\n                    yield webglMutation({\r\n                        mutation: command,\r\n                        type: mutation.type,\r\n                        target,\r\n                        imageMap,\r\n                        errorHandler,\r\n                    });\r\n                }\r\n                return;\r\n            }\r\n            for (let i = 0; i < commands.length; i++) {\r\n                const command = commands[i];\r\n                yield canvasMutation$1({\r\n                    event,\r\n                    mutation: command,\r\n                    target,\r\n                    imageMap,\r\n                    errorHandler,\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            errorHandler(mutation, error);\r\n        }\r\n    });\r\n}\n\nexport { canvasMutation as default };\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,yCAAyC;AACnE,SAASC,aAAa,QAAQ,iCAAiC;AAC/D,OAAOC,aAAa,MAAM,YAAY;AACtC,OAAOC,gBAAgB,MAAM,SAAS;AAEtC,SAASC,cAAcA,CAAC;EAAEC,KAAK;EAAEC,QAAQ;EAAEC,MAAM;EAAEC,QAAQ;EAAEC,cAAc;EAAEC;AAAc,CAAC,EAAE;EAC1F,OAAOV,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;IAChD,IAAI;MACA,MAAMW,mBAAmB,GAAGF,cAAc,CAACG,GAAG,CAACP,KAAK,CAAC,IAAIC,QAAQ;MACjE,MAAMO,QAAQ,GAAG,UAAU,IAAIF,mBAAmB,GAC5CA,mBAAmB,CAACE,QAAQ,GAC5B,CAACF,mBAAmB,CAAC;MAC3B,IAAI,CAACV,aAAa,CAACa,KAAK,EAAEb,aAAa,CAACc,MAAM,CAAC,CAACC,QAAQ,CAACV,QAAQ,CAACW,IAAI,CAAC,EAAE;QACrE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,QAAQ,CAACM,MAAM,EAAED,CAAC,EAAE,EAAE;UACtC,MAAME,OAAO,GAAGP,QAAQ,CAACK,CAAC,CAAC;UAC3B,MAAMhB,aAAa,CAAC;YAChBI,QAAQ,EAAEc,OAAO;YACjBH,IAAI,EAAEX,QAAQ,CAACW,IAAI;YACnBV,MAAM;YACNC,QAAQ;YACRE;UACJ,CAAC,CAAC;QACN;QACA;MACJ;MACA,KAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,QAAQ,CAACM,MAAM,EAAED,CAAC,EAAE,EAAE;QACtC,MAAME,OAAO,GAAGP,QAAQ,CAACK,CAAC,CAAC;QAC3B,MAAMf,gBAAgB,CAAC;UACnBE,KAAK;UACLC,QAAQ,EAAEc,OAAO;UACjBb,MAAM;UACNC,QAAQ;UACRE;QACJ,CAAC,CAAC;MACN;IACJ,CAAC,CACD,OAAOW,KAAK,EAAE;MACVX,YAAY,CAACJ,QAAQ,EAAEe,KAAK,CAAC;IACjC;EACJ,CAAC,CAAC;AACN;AAEA,SAASjB,cAAc,IAAIkB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}