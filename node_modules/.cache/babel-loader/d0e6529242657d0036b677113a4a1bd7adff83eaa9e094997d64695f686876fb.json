{"ast":null,"code":"import { genId } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport CrossOriginIframeMirror from './cross-origin-iframe-mirror.js';\nimport { EventType, IncrementalSource } from '../../../types/dist/types.js';\nclass IframeManager {\n  constructor(options) {\n    this.iframes = new WeakMap();\n    this.crossOriginIframeMap = new WeakMap();\n    this.crossOriginIframeMirror = new CrossOriginIframeMirror(genId);\n    this.mutationCb = options.mutationCb;\n    this.wrappedEmit = options.wrappedEmit;\n    this.stylesheetManager = options.stylesheetManager;\n    this.recordCrossOriginIframes = options.recordCrossOriginIframes;\n    this.crossOriginIframeStyleMirror = new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror));\n    this.mirror = options.mirror;\n    if (this.recordCrossOriginIframes) {\n      window.addEventListener('message', this.handleMessage.bind(this));\n    }\n  }\n  addIframe(iframeEl) {\n    this.iframes.set(iframeEl, true);\n    if (iframeEl.contentWindow) this.crossOriginIframeMap.set(iframeEl.contentWindow, iframeEl);\n  }\n  addLoadListener(cb) {\n    this.loadListener = cb;\n  }\n  attachIframe(iframeEl, childSn) {\n    var _a;\n    this.mutationCb({\n      adds: [{\n        parentId: this.mirror.getId(iframeEl),\n        nextId: null,\n        node: childSn\n      }],\n      removes: [],\n      texts: [],\n      attributes: [],\n      isAttachIframe: true\n    });\n    (_a = this.loadListener) === null || _a === void 0 ? void 0 : _a.call(this, iframeEl);\n    if (iframeEl.contentDocument && iframeEl.contentDocument.adoptedStyleSheets && iframeEl.contentDocument.adoptedStyleSheets.length > 0) this.stylesheetManager.adoptStyleSheets(iframeEl.contentDocument.adoptedStyleSheets, this.mirror.getId(iframeEl.contentDocument));\n  }\n  handleMessage(message) {\n    if (message.data.type === 'rrweb') {\n      const iframeSourceWindow = message.source;\n      if (!iframeSourceWindow) return;\n      const iframeEl = this.crossOriginIframeMap.get(message.source);\n      if (!iframeEl) return;\n      const transformedEvent = this.transformCrossOriginEvent(iframeEl, message.data.event);\n      if (transformedEvent) this.wrappedEmit(transformedEvent, message.data.isCheckout);\n    }\n  }\n  transformCrossOriginEvent(iframeEl, e) {\n    var _a;\n    switch (e.type) {\n      case EventType.FullSnapshot:\n        {\n          this.crossOriginIframeMirror.reset(iframeEl);\n          this.crossOriginIframeStyleMirror.reset(iframeEl);\n          this.replaceIdOnNode(e.data.node, iframeEl);\n          return {\n            timestamp: e.timestamp,\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.Mutation,\n              adds: [{\n                parentId: this.mirror.getId(iframeEl),\n                nextId: null,\n                node: e.data.node\n              }],\n              removes: [],\n              texts: [],\n              attributes: [],\n              isAttachIframe: true\n            }\n          };\n        }\n      case EventType.Meta:\n      case EventType.Load:\n      case EventType.DomContentLoaded:\n        {\n          return false;\n        }\n      case EventType.Plugin:\n        {\n          return e;\n        }\n      case EventType.Custom:\n        {\n          this.replaceIds(e.data.payload, iframeEl, ['id', 'parentId', 'previousId', 'nextId']);\n          return e;\n        }\n      case EventType.IncrementalSnapshot:\n        {\n          switch (e.data.source) {\n            case IncrementalSource.Mutation:\n              {\n                e.data.adds.forEach(n => {\n                  this.replaceIds(n, iframeEl, ['parentId', 'nextId', 'previousId']);\n                  this.replaceIdOnNode(n.node, iframeEl);\n                });\n                e.data.removes.forEach(n => {\n                  this.replaceIds(n, iframeEl, ['parentId', 'id']);\n                });\n                e.data.attributes.forEach(n => {\n                  this.replaceIds(n, iframeEl, ['id']);\n                });\n                e.data.texts.forEach(n => {\n                  this.replaceIds(n, iframeEl, ['id']);\n                });\n                return e;\n              }\n            case IncrementalSource.Drag:\n            case IncrementalSource.TouchMove:\n            case IncrementalSource.MouseMove:\n              {\n                e.data.positions.forEach(p => {\n                  this.replaceIds(p, iframeEl, ['id']);\n                });\n                return e;\n              }\n            case IncrementalSource.ViewportResize:\n              {\n                return false;\n              }\n            case IncrementalSource.MediaInteraction:\n            case IncrementalSource.MouseInteraction:\n            case IncrementalSource.Scroll:\n            case IncrementalSource.CanvasMutation:\n            case IncrementalSource.Input:\n              {\n                this.replaceIds(e.data, iframeEl, ['id']);\n                return e;\n              }\n            case IncrementalSource.StyleSheetRule:\n            case IncrementalSource.StyleDeclaration:\n              {\n                this.replaceIds(e.data, iframeEl, ['id']);\n                this.replaceStyleIds(e.data, iframeEl, ['styleId']);\n                return e;\n              }\n            case IncrementalSource.Font:\n              {\n                return e;\n              }\n            case IncrementalSource.Selection:\n              {\n                e.data.ranges.forEach(range => {\n                  this.replaceIds(range, iframeEl, ['start', 'end']);\n                });\n                return e;\n              }\n            case IncrementalSource.AdoptedStyleSheet:\n              {\n                this.replaceIds(e.data, iframeEl, ['id']);\n                this.replaceStyleIds(e.data, iframeEl, ['styleIds']);\n                (_a = e.data.styles) === null || _a === void 0 ? void 0 : _a.forEach(style => {\n                  this.replaceStyleIds(style, iframeEl, ['styleId']);\n                });\n                return e;\n              }\n          }\n        }\n    }\n  }\n  replace(iframeMirror, obj, iframeEl, keys) {\n    for (const key of keys) {\n      if (!Array.isArray(obj[key]) && typeof obj[key] !== 'number') continue;\n      if (Array.isArray(obj[key])) {\n        obj[key] = iframeMirror.getIds(iframeEl, obj[key]);\n      } else {\n        obj[key] = iframeMirror.getId(iframeEl, obj[key]);\n      }\n    }\n    return obj;\n  }\n  replaceIds(obj, iframeEl, keys) {\n    return this.replace(this.crossOriginIframeMirror, obj, iframeEl, keys);\n  }\n  replaceStyleIds(obj, iframeEl, keys) {\n    return this.replace(this.crossOriginIframeStyleMirror, obj, iframeEl, keys);\n  }\n  replaceIdOnNode(node, iframeEl) {\n    this.replaceIds(node, iframeEl, ['id']);\n    if ('childNodes' in node) {\n      node.childNodes.forEach(child => {\n        this.replaceIdOnNode(child, iframeEl);\n      });\n    }\n  }\n}\nexport { IframeManager };","map":{"version":3,"names":["genId","CrossOriginIframeMirror","EventType","IncrementalSource","IframeManager","constructor","options","iframes","WeakMap","crossOriginIframeMap","crossOriginIframeMirror","mutationCb","wrappedEmit","stylesheetManager","recordCrossOriginIframes","crossOriginIframeStyleMirror","styleMirror","generateId","bind","mirror","window","addEventListener","handleMessage","addIframe","iframeEl","set","contentWindow","addLoadListener","cb","loadListener","attachIframe","childSn","_a","adds","parentId","getId","nextId","node","removes","texts","attributes","isAttachIframe","call","contentDocument","adoptedStyleSheets","length","adoptStyleSheets","message","data","type","iframeSourceWindow","source","get","transformedEvent","transformCrossOriginEvent","event","isCheckout","e","FullSnapshot","reset","replaceIdOnNode","timestamp","IncrementalSnapshot","Mutation","Meta","Load","DomContentLoaded","Plugin","Custom","replaceIds","payload","forEach","n","Drag","TouchMove","MouseMove","positions","p","ViewportResize","MediaInteraction","MouseInteraction","Scroll","CanvasMutation","Input","StyleSheetRule","StyleDeclaration","replaceStyleIds","Font","Selection","ranges","range","AdoptedStyleSheet","styles","style","replace","iframeMirror","obj","keys","key","Array","isArray","getIds","childNodes","child"],"sources":["/Users/ogonen/rrweb/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/iframe-manager.js"],"sourcesContent":["import { genId } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport CrossOriginIframeMirror from './cross-origin-iframe-mirror.js';\nimport { EventType, IncrementalSource } from '../../../types/dist/types.js';\n\nclass IframeManager {\r\n    constructor(options) {\r\n        this.iframes = new WeakMap();\r\n        this.crossOriginIframeMap = new WeakMap();\r\n        this.crossOriginIframeMirror = new CrossOriginIframeMirror(genId);\r\n        this.mutationCb = options.mutationCb;\r\n        this.wrappedEmit = options.wrappedEmit;\r\n        this.stylesheetManager = options.stylesheetManager;\r\n        this.recordCrossOriginIframes = options.recordCrossOriginIframes;\r\n        this.crossOriginIframeStyleMirror = new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror));\r\n        this.mirror = options.mirror;\r\n        if (this.recordCrossOriginIframes) {\r\n            window.addEventListener('message', this.handleMessage.bind(this));\r\n        }\r\n    }\r\n    addIframe(iframeEl) {\r\n        this.iframes.set(iframeEl, true);\r\n        if (iframeEl.contentWindow)\r\n            this.crossOriginIframeMap.set(iframeEl.contentWindow, iframeEl);\r\n    }\r\n    addLoadListener(cb) {\r\n        this.loadListener = cb;\r\n    }\r\n    attachIframe(iframeEl, childSn) {\r\n        var _a;\r\n        this.mutationCb({\r\n            adds: [\r\n                {\r\n                    parentId: this.mirror.getId(iframeEl),\r\n                    nextId: null,\r\n                    node: childSn,\r\n                },\r\n            ],\r\n            removes: [],\r\n            texts: [],\r\n            attributes: [],\r\n            isAttachIframe: true,\r\n        });\r\n        (_a = this.loadListener) === null || _a === void 0 ? void 0 : _a.call(this, iframeEl);\r\n        if (iframeEl.contentDocument &&\r\n            iframeEl.contentDocument.adoptedStyleSheets &&\r\n            iframeEl.contentDocument.adoptedStyleSheets.length > 0)\r\n            this.stylesheetManager.adoptStyleSheets(iframeEl.contentDocument.adoptedStyleSheets, this.mirror.getId(iframeEl.contentDocument));\r\n    }\r\n    handleMessage(message) {\r\n        if (message.data.type === 'rrweb') {\r\n            const iframeSourceWindow = message.source;\r\n            if (!iframeSourceWindow)\r\n                return;\r\n            const iframeEl = this.crossOriginIframeMap.get(message.source);\r\n            if (!iframeEl)\r\n                return;\r\n            const transformedEvent = this.transformCrossOriginEvent(iframeEl, message.data.event);\r\n            if (transformedEvent)\r\n                this.wrappedEmit(transformedEvent, message.data.isCheckout);\r\n        }\r\n    }\r\n    transformCrossOriginEvent(iframeEl, e) {\r\n        var _a;\r\n        switch (e.type) {\r\n            case EventType.FullSnapshot: {\r\n                this.crossOriginIframeMirror.reset(iframeEl);\r\n                this.crossOriginIframeStyleMirror.reset(iframeEl);\r\n                this.replaceIdOnNode(e.data.node, iframeEl);\r\n                return {\r\n                    timestamp: e.timestamp,\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: {\r\n                        source: IncrementalSource.Mutation,\r\n                        adds: [\r\n                            {\r\n                                parentId: this.mirror.getId(iframeEl),\r\n                                nextId: null,\r\n                                node: e.data.node,\r\n                            },\r\n                        ],\r\n                        removes: [],\r\n                        texts: [],\r\n                        attributes: [],\r\n                        isAttachIframe: true,\r\n                    },\r\n                };\r\n            }\r\n            case EventType.Meta:\r\n            case EventType.Load:\r\n            case EventType.DomContentLoaded: {\r\n                return false;\r\n            }\r\n            case EventType.Plugin: {\r\n                return e;\r\n            }\r\n            case EventType.Custom: {\r\n                this.replaceIds(e.data.payload, iframeEl, ['id', 'parentId', 'previousId', 'nextId']);\r\n                return e;\r\n            }\r\n            case EventType.IncrementalSnapshot: {\r\n                switch (e.data.source) {\r\n                    case IncrementalSource.Mutation: {\r\n                        e.data.adds.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, [\r\n                                'parentId',\r\n                                'nextId',\r\n                                'previousId',\r\n                            ]);\r\n                            this.replaceIdOnNode(n.node, iframeEl);\r\n                        });\r\n                        e.data.removes.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['parentId', 'id']);\r\n                        });\r\n                        e.data.attributes.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['id']);\r\n                        });\r\n                        e.data.texts.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['id']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Drag:\r\n                    case IncrementalSource.TouchMove:\r\n                    case IncrementalSource.MouseMove: {\r\n                        e.data.positions.forEach((p) => {\r\n                            this.replaceIds(p, iframeEl, ['id']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.ViewportResize: {\r\n                        return false;\r\n                    }\r\n                    case IncrementalSource.MediaInteraction:\r\n                    case IncrementalSource.MouseInteraction:\r\n                    case IncrementalSource.Scroll:\r\n                    case IncrementalSource.CanvasMutation:\r\n                    case IncrementalSource.Input: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.StyleSheetRule:\r\n                    case IncrementalSource.StyleDeclaration: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        this.replaceStyleIds(e.data, iframeEl, ['styleId']);\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Font: {\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Selection: {\r\n                        e.data.ranges.forEach((range) => {\r\n                            this.replaceIds(range, iframeEl, ['start', 'end']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.AdoptedStyleSheet: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        this.replaceStyleIds(e.data, iframeEl, ['styleIds']);\r\n                        (_a = e.data.styles) === null || _a === void 0 ? void 0 : _a.forEach((style) => {\r\n                            this.replaceStyleIds(style, iframeEl, ['styleId']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    replace(iframeMirror, obj, iframeEl, keys) {\r\n        for (const key of keys) {\r\n            if (!Array.isArray(obj[key]) && typeof obj[key] !== 'number')\r\n                continue;\r\n            if (Array.isArray(obj[key])) {\r\n                obj[key] = iframeMirror.getIds(iframeEl, obj[key]);\r\n            }\r\n            else {\r\n                obj[key] = iframeMirror.getId(iframeEl, obj[key]);\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    replaceIds(obj, iframeEl, keys) {\r\n        return this.replace(this.crossOriginIframeMirror, obj, iframeEl, keys);\r\n    }\r\n    replaceStyleIds(obj, iframeEl, keys) {\r\n        return this.replace(this.crossOriginIframeStyleMirror, obj, iframeEl, keys);\r\n    }\r\n    replaceIdOnNode(node, iframeEl) {\r\n        this.replaceIds(node, iframeEl, ['id']);\r\n        if ('childNodes' in node) {\r\n            node.childNodes.forEach((child) => {\r\n                this.replaceIdOnNode(child, iframeEl);\r\n            });\r\n        }\r\n    }\r\n}\n\nexport { IframeManager };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}