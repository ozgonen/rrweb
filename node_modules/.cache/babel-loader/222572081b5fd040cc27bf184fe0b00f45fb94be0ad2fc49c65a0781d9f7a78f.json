{"ast":null,"code":"function pathToSelector(node) {\n  if (!node || !node.outerHTML) {\n    return '';\n  }\n  let path = '';\n  while (node.parentElement) {\n    let name = node.localName;\n    if (!name) {\n      break;\n    }\n    name = name.toLowerCase();\n    const parent = node.parentElement;\n    const domSiblings = [];\n    if (parent.children && parent.children.length > 0) {\n      for (let i = 0; i < parent.children.length; i++) {\n        const sibling = parent.children[i];\n        if (sibling.localName && sibling.localName.toLowerCase) {\n          if (sibling.localName.toLowerCase() === name) {\n            domSiblings.push(sibling);\n          }\n        }\n      }\n    }\n    if (domSiblings.length > 1) {\n      name += `:eq(${domSiblings.indexOf(node)})`;\n    }\n    path = name + (path ? '>' + path : '');\n    node = parent;\n  }\n  return path;\n}\nfunction isObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\nfunction isObjTooDeep(obj, limit) {\n  if (limit === 0) {\n    return true;\n  }\n  const keys = Object.keys(obj);\n  for (const key of keys) {\n    if (isObject(obj[key]) && isObjTooDeep(obj[key], limit - 1)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction stringify(obj, stringifyOptions) {\n  const options = {\n    numOfKeysLimit: 50,\n    depthOfLimit: 4\n  };\n  Object.assign(options, stringifyOptions);\n  const stack = [];\n  const keys = [];\n  return JSON.stringify(obj, function (key, value) {\n    if (stack.length > 0) {\n      const thisPos = stack.indexOf(this);\n      ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\n      ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\n      if (~stack.indexOf(value)) {\n        if (stack[0] === value) {\n          value = '[Circular ~]';\n        } else {\n          value = '[Circular ~.' + keys.slice(0, stack.indexOf(value)).join('.') + ']';\n        }\n      }\n    } else {\n      stack.push(value);\n    }\n    if (value === null) return value;\n    if (value === undefined) return 'undefined';\n    if (shouldIgnore(value)) {\n      return toString(value);\n    }\n    if (value instanceof Event) {\n      const eventResult = {};\n      for (const eventKey in value) {\n        const eventValue = value[eventKey];\n        if (Array.isArray(eventValue)) {\n          eventResult[eventKey] = pathToSelector(eventValue.length ? eventValue[0] : null);\n        } else {\n          eventResult[eventKey] = eventValue;\n        }\n      }\n      return eventResult;\n    } else if (value instanceof Node) {\n      if (value instanceof HTMLElement) {\n        return value ? value.outerHTML : '';\n      }\n      return value.nodeName;\n    } else if (value instanceof Error) {\n      return value.stack ? value.stack + '\\nEnd of stack for Error object' : value.name + ': ' + value.message;\n    }\n    return value;\n  });\n  function shouldIgnore(_obj) {\n    if (isObject(_obj) && Object.keys(_obj).length > options.numOfKeysLimit) {\n      return true;\n    }\n    if (typeof _obj === 'function') {\n      return true;\n    }\n    if (isObject(_obj) && isObjTooDeep(_obj, options.depthOfLimit)) {\n      return true;\n    }\n    return false;\n  }\n  function toString(_obj) {\n    let str = _obj.toString();\n    if (options.stringLengthLimit && str.length > options.stringLengthLimit) {\n      str = `${str.slice(0, options.stringLengthLimit)}...`;\n    }\n    return str;\n  }\n}\nexport { stringify };","map":{"version":3,"names":["pathToSelector","node","outerHTML","path","parentElement","name","localName","toLowerCase","parent","domSiblings","children","length","i","sibling","push","indexOf","isObject","obj","Object","prototype","toString","call","isObjTooDeep","limit","keys","key","stringify","stringifyOptions","options","numOfKeysLimit","depthOfLimit","assign","stack","JSON","value","thisPos","splice","Infinity","slice","join","undefined","shouldIgnore","Event","eventResult","eventKey","eventValue","Array","isArray","Node","HTMLElement","nodeName","Error","message","_obj","str","stringLengthLimit"],"sources":["/Users/ogonen/rrweb/node_modules/rrweb/es/rrweb/packages/rrweb/src/plugins/console/record/stringify.js"],"sourcesContent":["function pathToSelector(node) {\r\n    if (!node || !node.outerHTML) {\r\n        return '';\r\n    }\r\n    let path = '';\r\n    while (node.parentElement) {\r\n        let name = node.localName;\r\n        if (!name) {\r\n            break;\r\n        }\r\n        name = name.toLowerCase();\r\n        const parent = node.parentElement;\r\n        const domSiblings = [];\r\n        if (parent.children && parent.children.length > 0) {\r\n            for (let i = 0; i < parent.children.length; i++) {\r\n                const sibling = parent.children[i];\r\n                if (sibling.localName && sibling.localName.toLowerCase) {\r\n                    if (sibling.localName.toLowerCase() === name) {\r\n                        domSiblings.push(sibling);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (domSiblings.length > 1) {\r\n            name += `:eq(${domSiblings.indexOf(node)})`;\r\n        }\r\n        path = name + (path ? '>' + path : '');\r\n        node = parent;\r\n    }\r\n    return path;\r\n}\r\nfunction isObject(obj) {\r\n    return Object.prototype.toString.call(obj) === '[object Object]';\r\n}\r\nfunction isObjTooDeep(obj, limit) {\r\n    if (limit === 0) {\r\n        return true;\r\n    }\r\n    const keys = Object.keys(obj);\r\n    for (const key of keys) {\r\n        if (isObject(obj[key]) &&\r\n            isObjTooDeep(obj[key], limit - 1)) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction stringify(obj, stringifyOptions) {\r\n    const options = {\r\n        numOfKeysLimit: 50,\r\n        depthOfLimit: 4,\r\n    };\r\n    Object.assign(options, stringifyOptions);\r\n    const stack = [];\r\n    const keys = [];\r\n    return JSON.stringify(obj, function (key, value) {\r\n        if (stack.length > 0) {\r\n            const thisPos = stack.indexOf(this);\r\n            ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\r\n            ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\r\n            if (~stack.indexOf(value)) {\r\n                if (stack[0] === value) {\r\n                    value = '[Circular ~]';\r\n                }\r\n                else {\r\n                    value =\r\n                        '[Circular ~.' +\r\n                            keys.slice(0, stack.indexOf(value)).join('.') +\r\n                            ']';\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            stack.push(value);\r\n        }\r\n        if (value === null)\r\n            return value;\r\n        if (value === undefined)\r\n            return 'undefined';\r\n        if (shouldIgnore(value)) {\r\n            return toString(value);\r\n        }\r\n        if (value instanceof Event) {\r\n            const eventResult = {};\r\n            for (const eventKey in value) {\r\n                const eventValue = value[eventKey];\r\n                if (Array.isArray(eventValue)) {\r\n                    eventResult[eventKey] = pathToSelector((eventValue.length ? eventValue[0] : null));\r\n                }\r\n                else {\r\n                    eventResult[eventKey] = eventValue;\r\n                }\r\n            }\r\n            return eventResult;\r\n        }\r\n        else if (value instanceof Node) {\r\n            if (value instanceof HTMLElement) {\r\n                return value ? value.outerHTML : '';\r\n            }\r\n            return value.nodeName;\r\n        }\r\n        else if (value instanceof Error) {\r\n            return value.stack\r\n                ? value.stack + '\\nEnd of stack for Error object'\r\n                : value.name + ': ' + value.message;\r\n        }\r\n        return value;\r\n    });\r\n    function shouldIgnore(_obj) {\r\n        if (isObject(_obj) && Object.keys(_obj).length > options.numOfKeysLimit) {\r\n            return true;\r\n        }\r\n        if (typeof _obj === 'function') {\r\n            return true;\r\n        }\r\n        if (isObject(_obj) &&\r\n            isObjTooDeep(_obj, options.depthOfLimit)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    function toString(_obj) {\r\n        let str = _obj.toString();\r\n        if (options.stringLengthLimit && str.length > options.stringLengthLimit) {\r\n            str = `${str.slice(0, options.stringLengthLimit)}...`;\r\n        }\r\n        return str;\r\n    }\r\n}\n\nexport { stringify };\n"],"mappings":"AAAA,SAASA,cAAcA,CAACC,IAAI,EAAE;EAC1B,IAAI,CAACA,IAAI,IAAI,CAACA,IAAI,CAACC,SAAS,EAAE;IAC1B,OAAO,EAAE;EACb;EACA,IAAIC,IAAI,GAAG,EAAE;EACb,OAAOF,IAAI,CAACG,aAAa,EAAE;IACvB,IAAIC,IAAI,GAAGJ,IAAI,CAACK,SAAS;IACzB,IAAI,CAACD,IAAI,EAAE;MACP;IACJ;IACAA,IAAI,GAAGA,IAAI,CAACE,WAAW,CAAC,CAAC;IACzB,MAAMC,MAAM,GAAGP,IAAI,CAACG,aAAa;IACjC,MAAMK,WAAW,GAAG,EAAE;IACtB,IAAID,MAAM,CAACE,QAAQ,IAAIF,MAAM,CAACE,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;MAC/C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,CAACE,QAAQ,CAACC,MAAM,EAAEC,CAAC,EAAE,EAAE;QAC7C,MAAMC,OAAO,GAAGL,MAAM,CAACE,QAAQ,CAACE,CAAC,CAAC;QAClC,IAAIC,OAAO,CAACP,SAAS,IAAIO,OAAO,CAACP,SAAS,CAACC,WAAW,EAAE;UACpD,IAAIM,OAAO,CAACP,SAAS,CAACC,WAAW,CAAC,CAAC,KAAKF,IAAI,EAAE;YAC1CI,WAAW,CAACK,IAAI,CAACD,OAAO,CAAC;UAC7B;QACJ;MACJ;IACJ;IACA,IAAIJ,WAAW,CAACE,MAAM,GAAG,CAAC,EAAE;MACxBN,IAAI,IAAI,OAAOI,WAAW,CAACM,OAAO,CAACd,IAAI,CAAC,GAAG;IAC/C;IACAE,IAAI,GAAGE,IAAI,IAAIF,IAAI,GAAG,GAAG,GAAGA,IAAI,GAAG,EAAE,CAAC;IACtCF,IAAI,GAAGO,MAAM;EACjB;EACA,OAAOL,IAAI;AACf;AACA,SAASa,QAAQA,CAACC,GAAG,EAAE;EACnB,OAAOC,MAAM,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAACJ,GAAG,CAAC,KAAK,iBAAiB;AACpE;AACA,SAASK,YAAYA,CAACL,GAAG,EAAEM,KAAK,EAAE;EAC9B,IAAIA,KAAK,KAAK,CAAC,EAAE;IACb,OAAO,IAAI;EACf;EACA,MAAMC,IAAI,GAAGN,MAAM,CAACM,IAAI,CAACP,GAAG,CAAC;EAC7B,KAAK,MAAMQ,GAAG,IAAID,IAAI,EAAE;IACpB,IAAIR,QAAQ,CAACC,GAAG,CAACQ,GAAG,CAAC,CAAC,IAClBH,YAAY,CAACL,GAAG,CAACQ,GAAG,CAAC,EAAEF,KAAK,GAAG,CAAC,CAAC,EAAE;MACnC,OAAO,IAAI;IACf;EACJ;EACA,OAAO,KAAK;AAChB;AACA,SAASG,SAASA,CAACT,GAAG,EAAEU,gBAAgB,EAAE;EACtC,MAAMC,OAAO,GAAG;IACZC,cAAc,EAAE,EAAE;IAClBC,YAAY,EAAE;EAClB,CAAC;EACDZ,MAAM,CAACa,MAAM,CAACH,OAAO,EAAED,gBAAgB,CAAC;EACxC,MAAMK,KAAK,GAAG,EAAE;EAChB,MAAMR,IAAI,GAAG,EAAE;EACf,OAAOS,IAAI,CAACP,SAAS,CAACT,GAAG,EAAE,UAAUQ,GAAG,EAAES,KAAK,EAAE;IAC7C,IAAIF,KAAK,CAACrB,MAAM,GAAG,CAAC,EAAE;MAClB,MAAMwB,OAAO,GAAGH,KAAK,CAACjB,OAAO,CAAC,IAAI,CAAC;MACnC,CAACoB,OAAO,GAAGH,KAAK,CAACI,MAAM,CAACD,OAAO,GAAG,CAAC,CAAC,GAAGH,KAAK,CAAClB,IAAI,CAAC,IAAI,CAAC;MACvD,CAACqB,OAAO,GAAGX,IAAI,CAACY,MAAM,CAACD,OAAO,EAAEE,QAAQ,EAAEZ,GAAG,CAAC,GAAGD,IAAI,CAACV,IAAI,CAACW,GAAG,CAAC;MAC/D,IAAI,CAACO,KAAK,CAACjB,OAAO,CAACmB,KAAK,CAAC,EAAE;QACvB,IAAIF,KAAK,CAAC,CAAC,CAAC,KAAKE,KAAK,EAAE;UACpBA,KAAK,GAAG,cAAc;QAC1B,CAAC,MACI;UACDA,KAAK,GACD,cAAc,GACVV,IAAI,CAACc,KAAK,CAAC,CAAC,EAAEN,KAAK,CAACjB,OAAO,CAACmB,KAAK,CAAC,CAAC,CAACK,IAAI,CAAC,GAAG,CAAC,GAC7C,GAAG;QACf;MACJ;IACJ,CAAC,MACI;MACDP,KAAK,CAAClB,IAAI,CAACoB,KAAK,CAAC;IACrB;IACA,IAAIA,KAAK,KAAK,IAAI,EACd,OAAOA,KAAK;IAChB,IAAIA,KAAK,KAAKM,SAAS,EACnB,OAAO,WAAW;IACtB,IAAIC,YAAY,CAACP,KAAK,CAAC,EAAE;MACrB,OAAOd,QAAQ,CAACc,KAAK,CAAC;IAC1B;IACA,IAAIA,KAAK,YAAYQ,KAAK,EAAE;MACxB,MAAMC,WAAW,GAAG,CAAC,CAAC;MACtB,KAAK,MAAMC,QAAQ,IAAIV,KAAK,EAAE;QAC1B,MAAMW,UAAU,GAAGX,KAAK,CAACU,QAAQ,CAAC;QAClC,IAAIE,KAAK,CAACC,OAAO,CAACF,UAAU,CAAC,EAAE;UAC3BF,WAAW,CAACC,QAAQ,CAAC,GAAG5C,cAAc,CAAE6C,UAAU,CAAClC,MAAM,GAAGkC,UAAU,CAAC,CAAC,CAAC,GAAG,IAAK,CAAC;QACtF,CAAC,MACI;UACDF,WAAW,CAACC,QAAQ,CAAC,GAAGC,UAAU;QACtC;MACJ;MACA,OAAOF,WAAW;IACtB,CAAC,MACI,IAAIT,KAAK,YAAYc,IAAI,EAAE;MAC5B,IAAId,KAAK,YAAYe,WAAW,EAAE;QAC9B,OAAOf,KAAK,GAAGA,KAAK,CAAChC,SAAS,GAAG,EAAE;MACvC;MACA,OAAOgC,KAAK,CAACgB,QAAQ;IACzB,CAAC,MACI,IAAIhB,KAAK,YAAYiB,KAAK,EAAE;MAC7B,OAAOjB,KAAK,CAACF,KAAK,GACZE,KAAK,CAACF,KAAK,GAAG,iCAAiC,GAC/CE,KAAK,CAAC7B,IAAI,GAAG,IAAI,GAAG6B,KAAK,CAACkB,OAAO;IAC3C;IACA,OAAOlB,KAAK;EAChB,CAAC,CAAC;EACF,SAASO,YAAYA,CAACY,IAAI,EAAE;IACxB,IAAIrC,QAAQ,CAACqC,IAAI,CAAC,IAAInC,MAAM,CAACM,IAAI,CAAC6B,IAAI,CAAC,CAAC1C,MAAM,GAAGiB,OAAO,CAACC,cAAc,EAAE;MACrE,OAAO,IAAI;IACf;IACA,IAAI,OAAOwB,IAAI,KAAK,UAAU,EAAE;MAC5B,OAAO,IAAI;IACf;IACA,IAAIrC,QAAQ,CAACqC,IAAI,CAAC,IACd/B,YAAY,CAAC+B,IAAI,EAAEzB,OAAO,CAACE,YAAY,CAAC,EAAE;MAC1C,OAAO,IAAI;IACf;IACA,OAAO,KAAK;EAChB;EACA,SAASV,QAAQA,CAACiC,IAAI,EAAE;IACpB,IAAIC,GAAG,GAAGD,IAAI,CAACjC,QAAQ,CAAC,CAAC;IACzB,IAAIQ,OAAO,CAAC2B,iBAAiB,IAAID,GAAG,CAAC3C,MAAM,GAAGiB,OAAO,CAAC2B,iBAAiB,EAAE;MACrED,GAAG,GAAG,GAAGA,GAAG,CAAChB,KAAK,CAAC,CAAC,EAAEV,OAAO,CAAC2B,iBAAiB,CAAC,KAAK;IACzD;IACA,OAAOD,GAAG;EACd;AACJ;AAEA,SAAS5B,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}